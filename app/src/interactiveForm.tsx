import * as React from 'react';
import * as ReactDOM from 'react-dom';
import renderHTML from 'react-render-html';
import ReactHtmlParser from 'react-html-parser';

import Selector from './formSelectorComponent';

interface CFProps {

}

interface CFState {
    drugName: string;
    chartType: string;
    numWeeks: string;
    predictBool: string;
    weeksToTrain: string;
    dataSource: string;
    showImage: string;
    imageData: string;
}

class InteractiveForm extends React.Component<CFProps, CFState> {
    constructor(props) {
        super(props);
        this.handleChange = this.handleChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
        this.state = {
            drugName: 'vascepa',
            chartType: 'graph_normalizedNRx',
            numWeeks: '52',
            predictBool: 'true',
            weeksToTrain: '156',
            dataSource: 'updated',
            showImage: "false",
            imageData: "",
        };
    }

    postData(url = 'http://api.rxpredictify.com/interactive', data = {
        "drug": this.state.drugName,
        "chartType": this.state.chartType,
        "weeks": Number(this.state.numWeeks),
        "predictBool": Boolean(this.state.predictBool),
        "source": this.state.dataSource,
        "weeksToTrainOn": Number(this.state.weeksToTrain)
    }) {
        return async () => {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            return response.text();
        }
    }

    handleChange(e: React.ChangeEvent<HTMLSelectElement>) {
        const name = e.target.name;
        const newVal = e.target.value;
        this.setState({ [name]: newVal } as Pick<CFState, keyof CFState>);
    }

    handleSubmit(e) {
        e.preventDefault();
        this.postData()()
            .then((data) => {
                console.log(data)
                this.setState({ showImage: "true", imageData: data })
                this.setState({
                    imageData: `<style>

</style>

<div id="fig_el81402352975817761120873258"></div>
<script>
function mpld3_load_lib(url, callback){
  var s = document.createElement('script');
  s.src = url;
  s.async = true;
  s.onreadystatechange = s.onload = callback;
  s.onerror = function(){console.warn("failed to load library " + url);};
  document.getElementsByTagName("head")[0].appendChild(s);
}

if(typeof(mpld3) !== "undefined" && mpld3._mpld3IsLoaded){
   // already loaded: just create the figure
   !function(mpld3){
       
       mpld3.draw_figure("fig_el81402352975817761120873258", {"width": 1200.0, "height": 600.0, "axes": [{"bbox": [0.125, 0.10999999999999999, 0.775, 0.77], "xlim": [16668.0, 18670.0], "ylim": [7801.4, 115658.6], "xdomain": [[2015, 7, 21, 0, 0, 0, 0.0], [2021, 1, 12, 0, 0, 0, 0.0]], "ydomain": [7801.4, 115658.6], "xscale": "date", "yscale": "linear", "axes": [{"position": "bottom", "nticks": 7, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 11.0, "grid": {"gridOn": true, "color": "#FFFFFF", "dasharray": "none", "alpha": 1.0}, "visible": true}, {"position": "left", "nticks": 7, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 11.0, "grid": {"gridOn": true, "color": "#FFFFFF", "dasharray": "none", "alpha": 1.0}, "visible": true}], "axesbg": "#EAEAF2", "axesbgalpha": null, "zoomable": true, "id": "el8140235297679440", "lines": [], "paths": [{"data": "data04", "xindex": 0, "yindex": 1, "coordinates": "axes", "pathcodes": ["M", "L", "S", "L", "S", "L", "S", "L", "S", "Z"], "id": "el8140235297154384", "dasharray": "none", "alpha": 0.8, "facecolor": "rgba(234, 234, 242, 0.8)", "edgecolor": "rgba(204, 204, 204, 0.8)", "edgewidth": 1.0, "zorder": 1000000.0}], "markers": [], "texts": [{"text": "Week", "position": [0.5, -0.12265930982928269], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "hanging", "rotation": -0.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235296973456"}, {"text": "Normalized_TRx", "position": [-0.08225806451612905, 0.5], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "auto", "rotation": -90.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235296975888"}, {"text": "Vascepa Normalized_TRx \n(2015-11-20 to 2019-11-15)", "position": [0.5, 1.018037518037518], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "auto", "rotation": -0.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235297082256"}, {"text": "Normalized_TRx", "position": [0.06078255675029867, 0.9442640692640691], "coordinates": "axes", "h_anchor": "start", "v_baseline": "auto", "rotation": -0.0, "fontsize": 11.0, "color": "#262626", "alpha": 1, "zorder": 1000003.0, "id": "el8140235263279824"}, {"text": "Normalized_TRx", "position": [0.06078255675029867, 0.8926579785954787], "coordinates": "axes", "h_anchor": "start", "v_baseline": "auto", "rotation": -0.0, "fontsize": 11.0, "color": "#262626", "alpha": 1, "zorder": 1000003.0, "id": "el8140235236406992"}], "collections": [{"offsets": "data01", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#4C72B0"], "facecolors": ["#4C72B0"], "edgewidths": [1.0], "offsetcoordinates": "data", "pathcoordinates": "display", "zorder": 1, "id": "el8140235297082704"}, {"offsets": "data02", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#DD8452"], "facecolors": ["#DD8452"], "edgewidths": [1.0], "offsetcoordinates": "data", "pathcoordinates": "display", "zorder": 1, "id": "el8140235263186960"}, {"offsets": "data03", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#4C72B0"], "facecolors": ["#4C72B0"], "edgewidths": [1.0], "offsetcoordinates": "axes", "pathcoordinates": "display", "zorder": 1000001.0, "id": "el8140235236407632"}, {"offsets": "data03", "xindex": 0, "yindex": 2, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#DD8452"], "facecolors": ["#DD8452"], "edgewidths": [1.0], "offsetcoordinates": "axes", "pathcoordinates": "display", "zorder": 1000001.0, "id": "el8140235237398608"}], "images": [], "sharex": [], "sharey": []}], "data": {"data01": [[18215.0, 76045.0], [18208.0, 75757.0], [18201.0, 73771.0], [18194.0, 73930.0], [18187.0, 71926.0], [18180.0, 72499.0], [18173.0, 71091.0], [18166.0, 70006.0], [18159.0, 70786.0], [18152.0, 70558.0], [18145.0, 63317.0], [18138.0, 68639.0], [18131.0, 66510.0], [18124.0, 65855.0], [18117.0, 60967.0], [18110.0, 65888.0], [18103.0, 64641.0], [18096.0, 63831.0], [18089.0, 64276.0], [18082.0, 58336.0], [18075.0, 62446.0], [18068.0, 61664.0], [18061.0, 61255.0], [18054.0, 63176.0], [18047.0, 56031.0], [18040.0, 58685.0], [18033.0, 58094.0], [18026.0, 58647.0], [18019.0, 59238.0], [18012.0, 54606.0], [18005.0, 55573.0], [17998.0, 55759.0], [17991.0, 55871.0], [17984.0, 53440.0], [17977.0, 52908.0], [17970.0, 53456.0], [17963.0, 53342.0], [17956.0, 52342.0], [17949.0, 48976.0], [17942.0, 49066.0], [17935.0, 47470.0], [17928.0, 46651.0], [17921.0, 44522.0], [17914.0, 44394.0], [17907.0, 44601.0], [17900.0, 39576.0], [17893.0, 37206.0], [17886.0, 45820.0], [17879.0, 45763.0], [17872.0, 46118.0], [17865.0, 43900.0], [17858.0, 37719.0], [17851.0, 42152.0], [17844.0, 41047.0], [17837.0, 39883.0], [17830.0, 39172.0], [17823.0, 38953.0], [17816.0, 38685.0], [17809.0, 39179.0], [17802.0, 37432.0], [17795.0, 36153.0], [17788.0, 36975.0], [17781.0, 33993.0], [17774.0, 35911.0], [17767.0, 35346.0], [17760.0, 34982.0], [17753.0, 35921.0], [17746.0, 34978.0], [17739.0, 35259.0], [17732.0, 34826.0], [17725.0, 35326.0], [17718.0, 32655.0], [17711.0, 34346.0], [17704.0, 33679.0], [17697.0, 34957.0], [17690.0, 34187.0], [17683.0, 31625.0], [17676.0, 33795.0], [17669.0, 33206.0], [17662.0, 33000.0], [17655.0, 33819.0], [17648.0, 33051.0], [17641.0, 32757.0], [17634.0, 32155.0], [17627.0, 31973.0], [17620.0, 31354.0], [17613.0, 30997.0], [17606.0, 31702.0], [17599.0, 31998.0], [17592.0, 32286.0], [17585.0, 30156.0], [17578.0, 30385.0], [17571.0, 30466.0], [17564.0, 30226.0], [17557.0, 29711.0], [17550.0, 29519.0], [17543.0, 29704.0], [17536.0, 27910.0], [17529.0, 28448.0], [17522.0, 32440.0], [17515.0, 32404.0], [17508.0, 33183.0], [17501.0, 33171.0], [17494.0, 27611.0], [17487.0, 32047.0], [17480.0, 31757.0], [17473.0, 31230.0], [17466.0, 30907.0], [17459.0, 30730.0], [17452.0, 30477.0], [17445.0, 30560.0], [17438.0, 30464.0], [17431.0, 30805.0], [17424.0, 30144.0], [17417.0, 28540.0], [17410.0, 29424.0], [17403.0, 29815.0], [17396.0, 30124.0], [17389.0, 29866.0], [17382.0, 29761.0], [17375.0, 28992.0], [17368.0, 29674.0], [17361.0, 29349.0], [17354.0, 26417.0], [17347.0, 28262.0], [17340.0, 27374.0], [17333.0, 28622.0], [17326.0, 28688.0], [17319.0, 25483.0], [17312.0, 27652.0], [17305.0, 27491.0], [17298.0, 27263.0], [17291.0, 27795.0], [17284.0, 26472.0], [17277.0, 26320.0], [17270.0, 26000.0], [17263.0, 27068.0], [17256.0, 25663.0], [17249.0, 25651.0], [17242.0, 25504.0], [17235.0, 26361.0], [17228.0, 26169.0], [17221.0, 24358.0], [17214.0, 24843.0], [17207.0, 23832.0], [17200.0, 23741.0], [17193.0, 23662.0], [17186.0, 22954.0], [17179.0, 22732.0], [17172.0, 21348.0], [17165.0, 21228.0], [17158.0, 24032.0], [17151.0, 24394.0], [17144.0, 23898.0], [17137.0, 23660.0], [17130.0, 19906.0], [17123.0, 22611.0], [17116.0, 21838.0], [17109.0, 22291.0], [17102.0, 21781.0], [17095.0, 21390.0], [17088.0, 21140.0], [17081.0, 21993.0], [17074.0, 21332.0], [17067.0, 20638.0], [17060.0, 21074.0], [17053.0, 19903.0], [17046.0, 20785.0], [17039.0, 20456.0], [17032.0, 20140.0], [17025.0, 20344.0], [17018.0, 20741.0], [17011.0, 19437.0], [17004.0, 20104.0], [16997.0, 19317.0], [16990.0, 18159.0], [16983.0, 19454.0], [16976.0, 18604.0], [16969.0, 19046.0], [16962.0, 18829.0], [16955.0, 17515.0], [16948.0, 18244.0], [16941.0, 18424.0], [16934.0, 18218.0], [16927.0, 18593.0], [16920.0, 18001.0], [16913.0, 17075.0], [16906.0, 17617.0], [16899.0, 17541.0], [16892.0, 16841.0], [16885.0, 16581.0], [16878.0, 16695.0], [16871.0, 16599.0], [16864.0, 17251.0], [16857.0, 16367.0], [16850.0, 15894.0], [16843.0, 15580.0], [16836.0, 15716.0], [16829.0, 14903.0], [16822.0, 14847.0], [16815.0, 15530.0], [16808.0, 15260.0], [16801.0, 14252.0], [16794.0, 13234.0], [16787.0, 15930.0], [16780.0, 15630.0], [16773.0, 15672.0], [16766.0, 12704.0], [16759.0, 15210.0]], "data02": [[18579.0, 110756.0], [18572.0, 110102.0], [18565.0, 107824.0], [18558.0, 108079.0], [18551.0, 106209.0], [18544.0, 106718.0], [18537.0, 105797.0], [18530.0, 104580.0], [18523.0, 104841.0], [18516.0, 95526.0], [18509.0, 104107.0], [18502.0, 102553.0], [18495.0, 100029.0], [18488.0, 98158.0], [18481.0, 98017.0], [18474.0, 98935.0], [18467.0, 99267.0], [18460.0, 100485.0], [18453.0, 91181.0], [18446.0, 95959.0], [18439.0, 96249.0], [18432.0, 96472.0], [18425.0, 95672.0], [18418.0, 97952.0], [18411.0, 88054.0], [18404.0, 93263.0], [18397.0, 93641.0], [18390.0, 93303.0], [18383.0, 92105.0], [18376.0, 90841.0], [18369.0, 90152.0], [18362.0, 89775.0], [18355.0, 89065.0], [18348.0, 88026.0], [18341.0, 87411.0], [18334.0, 87704.0], [18327.0, 88258.0], [18320.0, 87457.0], [18313.0, 81420.0], [18306.0, 82536.0], [18299.0, 79884.0], [18292.0, 79398.0], [18285.0, 76844.0], [18278.0, 77587.0], [18271.0, 77355.0], [18264.0, 70685.0], [18257.0, 68894.0], [18250.0, 81415.0], [18243.0, 82267.0], [18236.0, 80747.0], [18229.0, 67168.0], [18222.0, 81992.0]], "data03": [[0.03121266427718042, 0.9529446248196247, 0.9013385341510343]], "data04": [[0.01149940262843488, 0.8703327922077921], [0.19686379928315415, 0.8703327922077921], [0.20014934289127842, 0.8703327922077921], [0.20014934289127842, 0.8769465488215487], [0.20014934289127842, 0.9768518518518519], [0.20014934289127842, 0.9834656084656084], [0.19686379928315415, 0.9834656084656084], [0.01149940262843488, 0.9834656084656084], [0.008213859020310632, 0.9834656084656084], [0.008213859020310632, 0.9768518518518519], [0.008213859020310632, 0.8769465488215487], [0.008213859020310632, 0.8703327922077921], [0.01149940262843488, 0.8703327922077921]]}, "id": "el8140235297581776", "plugins": [{"type": "reset"}, {"type": "zoom", "button": true, "enabled": false}, {"type": "boxzoom", "button": true, "enabled": false}]});
   }(mpld3);
}else if(typeof define === "function" && define.amd){
   // require.js is available: use it to load d3/mpld3
   require.config({paths: {d3: "https://d3js.org/d3.v5"}});
   require(["d3"], function(d3){
      window.d3 = d3;
      mpld3_load_lib("https://mpld3.github.io/js/mpld3.v0.5.1.js", function(){
         
         mpld3.draw_figure("fig_el81402352975817761120873258", {"width": 1200.0, "height": 600.0, "axes": [{"bbox": [0.125, 0.10999999999999999, 0.775, 0.77], "xlim": [16668.0, 18670.0], "ylim": [7801.4, 115658.6], "xdomain": [[2015, 7, 21, 0, 0, 0, 0.0], [2021, 1, 12, 0, 0, 0, 0.0]], "ydomain": [7801.4, 115658.6], "xscale": "date", "yscale": "linear", "axes": [{"position": "bottom", "nticks": 7, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 11.0, "grid": {"gridOn": true, "color": "#FFFFFF", "dasharray": "none", "alpha": 1.0}, "visible": true}, {"position": "left", "nticks": 7, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 11.0, "grid": {"gridOn": true, "color": "#FFFFFF", "dasharray": "none", "alpha": 1.0}, "visible": true}], "axesbg": "#EAEAF2", "axesbgalpha": null, "zoomable": true, "id": "el8140235297679440", "lines": [], "paths": [{"data": "data04", "xindex": 0, "yindex": 1, "coordinates": "axes", "pathcodes": ["M", "L", "S", "L", "S", "L", "S", "L", "S", "Z"], "id": "el8140235297154384", "dasharray": "none", "alpha": 0.8, "facecolor": "rgba(234, 234, 242, 0.8)", "edgecolor": "rgba(204, 204, 204, 0.8)", "edgewidth": 1.0, "zorder": 1000000.0}], "markers": [], "texts": [{"text": "Week", "position": [0.5, -0.12265930982928269], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "hanging", "rotation": -0.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235296973456"}, {"text": "Normalized_TRx", "position": [-0.08225806451612905, 0.5], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "auto", "rotation": -90.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235296975888"}, {"text": "Vascepa Normalized_TRx \n(2015-11-20 to 2019-11-15)", "position": [0.5, 1.018037518037518], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "auto", "rotation": -0.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235297082256"}, {"text": "Normalized_TRx", "position": [0.06078255675029867, 0.9442640692640691], "coordinates": "axes", "h_anchor": "start", "v_baseline": "auto", "rotation": -0.0, "fontsize": 11.0, "color": "#262626", "alpha": 1, "zorder": 1000003.0, "id": "el8140235263279824"}, {"text": "Normalized_TRx", "position": [0.06078255675029867, 0.8926579785954787], "coordinates": "axes", "h_anchor": "start", "v_baseline": "auto", "rotation": -0.0, "fontsize": 11.0, "color": "#262626", "alpha": 1, "zorder": 1000003.0, "id": "el8140235236406992"}], "collections": [{"offsets": "data01", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#4C72B0"], "facecolors": ["#4C72B0"], "edgewidths": [1.0], "offsetcoordinates": "data", "pathcoordinates": "display", "zorder": 1, "id": "el8140235297082704"}, {"offsets": "data02", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#DD8452"], "facecolors": ["#DD8452"], "edgewidths": [1.0], "offsetcoordinates": "data", "pathcoordinates": "display", "zorder": 1, "id": "el8140235263186960"}, {"offsets": "data03", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#4C72B0"], "facecolors": ["#4C72B0"], "edgewidths": [1.0], "offsetcoordinates": "axes", "pathcoordinates": "display", "zorder": 1000001.0, "id": "el8140235236407632"}, {"offsets": "data03", "xindex": 0, "yindex": 2, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#DD8452"], "facecolors": ["#DD8452"], "edgewidths": [1.0], "offsetcoordinates": "axes", "pathcoordinates": "display", "zorder": 1000001.0, "id": "el8140235237398608"}], "images": [], "sharex": [], "sharey": []}], "data": {"data01": [[18215.0, 76045.0], [18208.0, 75757.0], [18201.0, 73771.0], [18194.0, 73930.0], [18187.0, 71926.0], [18180.0, 72499.0], [18173.0, 71091.0], [18166.0, 70006.0], [18159.0, 70786.0], [18152.0, 70558.0], [18145.0, 63317.0], [18138.0, 68639.0], [18131.0, 66510.0], [18124.0, 65855.0], [18117.0, 60967.0], [18110.0, 65888.0], [18103.0, 64641.0], [18096.0, 63831.0], [18089.0, 64276.0], [18082.0, 58336.0], [18075.0, 62446.0], [18068.0, 61664.0], [18061.0, 61255.0], [18054.0, 63176.0], [18047.0, 56031.0], [18040.0, 58685.0], [18033.0, 58094.0], [18026.0, 58647.0], [18019.0, 59238.0], [18012.0, 54606.0], [18005.0, 55573.0], [17998.0, 55759.0], [17991.0, 55871.0], [17984.0, 53440.0], [17977.0, 52908.0], [17970.0, 53456.0], [17963.0, 53342.0], [17956.0, 52342.0], [17949.0, 48976.0], [17942.0, 49066.0], [17935.0, 47470.0], [17928.0, 46651.0], [17921.0, 44522.0], [17914.0, 44394.0], [17907.0, 44601.0], [17900.0, 39576.0], [17893.0, 37206.0], [17886.0, 45820.0], [17879.0, 45763.0], [17872.0, 46118.0], [17865.0, 43900.0], [17858.0, 37719.0], [17851.0, 42152.0], [17844.0, 41047.0], [17837.0, 39883.0], [17830.0, 39172.0], [17823.0, 38953.0], [17816.0, 38685.0], [17809.0, 39179.0], [17802.0, 37432.0], [17795.0, 36153.0], [17788.0, 36975.0], [17781.0, 33993.0], [17774.0, 35911.0], [17767.0, 35346.0], [17760.0, 34982.0], [17753.0, 35921.0], [17746.0, 34978.0], [17739.0, 35259.0], [17732.0, 34826.0], [17725.0, 35326.0], [17718.0, 32655.0], [17711.0, 34346.0], [17704.0, 33679.0], [17697.0, 34957.0], [17690.0, 34187.0], [17683.0, 31625.0], [17676.0, 33795.0], [17669.0, 33206.0], [17662.0, 33000.0], [17655.0, 33819.0], [17648.0, 33051.0], [17641.0, 32757.0], [17634.0, 32155.0], [17627.0, 31973.0], [17620.0, 31354.0], [17613.0, 30997.0], [17606.0, 31702.0], [17599.0, 31998.0], [17592.0, 32286.0], [17585.0, 30156.0], [17578.0, 30385.0], [17571.0, 30466.0], [17564.0, 30226.0], [17557.0, 29711.0], [17550.0, 29519.0], [17543.0, 29704.0], [17536.0, 27910.0], [17529.0, 28448.0], [17522.0, 32440.0], [17515.0, 32404.0], [17508.0, 33183.0], [17501.0, 33171.0], [17494.0, 27611.0], [17487.0, 32047.0], [17480.0, 31757.0], [17473.0, 31230.0], [17466.0, 30907.0], [17459.0, 30730.0], [17452.0, 30477.0], [17445.0, 30560.0], [17438.0, 30464.0], [17431.0, 30805.0], [17424.0, 30144.0], [17417.0, 28540.0], [17410.0, 29424.0], [17403.0, 29815.0], [17396.0, 30124.0], [17389.0, 29866.0], [17382.0, 29761.0], [17375.0, 28992.0], [17368.0, 29674.0], [17361.0, 29349.0], [17354.0, 26417.0], [17347.0, 28262.0], [17340.0, 27374.0], [17333.0, 28622.0], [17326.0, 28688.0], [17319.0, 25483.0], [17312.0, 27652.0], [17305.0, 27491.0], [17298.0, 27263.0], [17291.0, 27795.0], [17284.0, 26472.0], [17277.0, 26320.0], [17270.0, 26000.0], [17263.0, 27068.0], [17256.0, 25663.0], [17249.0, 25651.0], [17242.0, 25504.0], [17235.0, 26361.0], [17228.0, 26169.0], [17221.0, 24358.0], [17214.0, 24843.0], [17207.0, 23832.0], [17200.0, 23741.0], [17193.0, 23662.0], [17186.0, 22954.0], [17179.0, 22732.0], [17172.0, 21348.0], [17165.0, 21228.0], [17158.0, 24032.0], [17151.0, 24394.0], [17144.0, 23898.0], [17137.0, 23660.0], [17130.0, 19906.0], [17123.0, 22611.0], [17116.0, 21838.0], [17109.0, 22291.0], [17102.0, 21781.0], [17095.0, 21390.0], [17088.0, 21140.0], [17081.0, 21993.0], [17074.0, 21332.0], [17067.0, 20638.0], [17060.0, 21074.0], [17053.0, 19903.0], [17046.0, 20785.0], [17039.0, 20456.0], [17032.0, 20140.0], [17025.0, 20344.0], [17018.0, 20741.0], [17011.0, 19437.0], [17004.0, 20104.0], [16997.0, 19317.0], [16990.0, 18159.0], [16983.0, 19454.0], [16976.0, 18604.0], [16969.0, 19046.0], [16962.0, 18829.0], [16955.0, 17515.0], [16948.0, 18244.0], [16941.0, 18424.0], [16934.0, 18218.0], [16927.0, 18593.0], [16920.0, 18001.0], [16913.0, 17075.0], [16906.0, 17617.0], [16899.0, 17541.0], [16892.0, 16841.0], [16885.0, 16581.0], [16878.0, 16695.0], [16871.0, 16599.0], [16864.0, 17251.0], [16857.0, 16367.0], [16850.0, 15894.0], [16843.0, 15580.0], [16836.0, 15716.0], [16829.0, 14903.0], [16822.0, 14847.0], [16815.0, 15530.0], [16808.0, 15260.0], [16801.0, 14252.0], [16794.0, 13234.0], [16787.0, 15930.0], [16780.0, 15630.0], [16773.0, 15672.0], [16766.0, 12704.0], [16759.0, 15210.0]], "data02": [[18579.0, 110756.0], [18572.0, 110102.0], [18565.0, 107824.0], [18558.0, 108079.0], [18551.0, 106209.0], [18544.0, 106718.0], [18537.0, 105797.0], [18530.0, 104580.0], [18523.0, 104841.0], [18516.0, 95526.0], [18509.0, 104107.0], [18502.0, 102553.0], [18495.0, 100029.0], [18488.0, 98158.0], [18481.0, 98017.0], [18474.0, 98935.0], [18467.0, 99267.0], [18460.0, 100485.0], [18453.0, 91181.0], [18446.0, 95959.0], [18439.0, 96249.0], [18432.0, 96472.0], [18425.0, 95672.0], [18418.0, 97952.0], [18411.0, 88054.0], [18404.0, 93263.0], [18397.0, 93641.0], [18390.0, 93303.0], [18383.0, 92105.0], [18376.0, 90841.0], [18369.0, 90152.0], [18362.0, 89775.0], [18355.0, 89065.0], [18348.0, 88026.0], [18341.0, 87411.0], [18334.0, 87704.0], [18327.0, 88258.0], [18320.0, 87457.0], [18313.0, 81420.0], [18306.0, 82536.0], [18299.0, 79884.0], [18292.0, 79398.0], [18285.0, 76844.0], [18278.0, 77587.0], [18271.0, 77355.0], [18264.0, 70685.0], [18257.0, 68894.0], [18250.0, 81415.0], [18243.0, 82267.0], [18236.0, 80747.0], [18229.0, 67168.0], [18222.0, 81992.0]], "data03": [[0.03121266427718042, 0.9529446248196247, 0.9013385341510343]], "data04": [[0.01149940262843488, 0.8703327922077921], [0.19686379928315415, 0.8703327922077921], [0.20014934289127842, 0.8703327922077921], [0.20014934289127842, 0.8769465488215487], [0.20014934289127842, 0.9768518518518519], [0.20014934289127842, 0.9834656084656084], [0.19686379928315415, 0.9834656084656084], [0.01149940262843488, 0.9834656084656084], [0.008213859020310632, 0.9834656084656084], [0.008213859020310632, 0.9768518518518519], [0.008213859020310632, 0.8769465488215487], [0.008213859020310632, 0.8703327922077921], [0.01149940262843488, 0.8703327922077921]]}, "id": "el8140235297581776", "plugins": [{"type": "reset"}, {"type": "zoom", "button": true, "enabled": false}, {"type": "boxzoom", "button": true, "enabled": false}]});
      });
    });
}else{
    // require.js not available: dynamically load d3 & mpld3
    mpld3_load_lib("https://d3js.org/d3.v5.js", function(){
         mpld3_load_lib("https://mpld3.github.io/js/mpld3.v0.5.1.js", function(){
                 
                 mpld3.draw_figure("fig_el81402352975817761120873258", {"width": 1200.0, "height": 600.0, "axes": [{"bbox": [0.125, 0.10999999999999999, 0.775, 0.77], "xlim": [16668.0, 18670.0], "ylim": [7801.4, 115658.6], "xdomain": [[2015, 7, 21, 0, 0, 0, 0.0], [2021, 1, 12, 0, 0, 0, 0.0]], "ydomain": [7801.4, 115658.6], "xscale": "date", "yscale": "linear", "axes": [{"position": "bottom", "nticks": 7, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 11.0, "grid": {"gridOn": true, "color": "#FFFFFF", "dasharray": "none", "alpha": 1.0}, "visible": true}, {"position": "left", "nticks": 7, "tickvalues": null, "tickformat_formatter": "", "tickformat": null, "scale": "linear", "fontsize": 11.0, "grid": {"gridOn": true, "color": "#FFFFFF", "dasharray": "none", "alpha": 1.0}, "visible": true}], "axesbg": "#EAEAF2", "axesbgalpha": null, "zoomable": true, "id": "el8140235297679440", "lines": [], "paths": [{"data": "data04", "xindex": 0, "yindex": 1, "coordinates": "axes", "pathcodes": ["M", "L", "S", "L", "S", "L", "S", "L", "S", "Z"], "id": "el8140235297154384", "dasharray": "none", "alpha": 0.8, "facecolor": "rgba(234, 234, 242, 0.8)", "edgecolor": "rgba(204, 204, 204, 0.8)", "edgewidth": 1.0, "zorder": 1000000.0}], "markers": [], "texts": [{"text": "Week", "position": [0.5, -0.12265930982928269], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "hanging", "rotation": -0.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235296973456"}, {"text": "Normalized_TRx", "position": [-0.08225806451612905, 0.5], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "auto", "rotation": -90.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235296975888"}, {"text": "Vascepa Normalized_TRx \n(2015-11-20 to 2019-11-15)", "position": [0.5, 1.018037518037518], "coordinates": "axes", "h_anchor": "middle", "v_baseline": "auto", "rotation": -0.0, "fontsize": 12.0, "color": "#262626", "alpha": 1, "zorder": 3, "id": "el8140235297082256"}, {"text": "Normalized_TRx", "position": [0.06078255675029867, 0.9442640692640691], "coordinates": "axes", "h_anchor": "start", "v_baseline": "auto", "rotation": -0.0, "fontsize": 11.0, "color": "#262626", "alpha": 1, "zorder": 1000003.0, "id": "el8140235263279824"}, {"text": "Normalized_TRx", "position": [0.06078255675029867, 0.8926579785954787], "coordinates": "axes", "h_anchor": "start", "v_baseline": "auto", "rotation": -0.0, "fontsize": 11.0, "color": "#262626", "alpha": 1, "zorder": 1000003.0, "id": "el8140235236406992"}], "collections": [{"offsets": "data01", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#4C72B0"], "facecolors": ["#4C72B0"], "edgewidths": [1.0], "offsetcoordinates": "data", "pathcoordinates": "display", "zorder": 1, "id": "el8140235297082704"}, {"offsets": "data02", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#DD8452"], "facecolors": ["#DD8452"], "edgewidths": [1.0], "offsetcoordinates": "data", "pathcoordinates": "display", "zorder": 1, "id": "el8140235263186960"}, {"offsets": "data03", "xindex": 0, "yindex": 1, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#4C72B0"], "facecolors": ["#4C72B0"], "edgewidths": [1.0], "offsetcoordinates": "axes", "pathcoordinates": "display", "zorder": 1000001.0, "id": "el8140235236407632"}, {"offsets": "data03", "xindex": 0, "yindex": 2, "paths": [[[[0.0, -0.5], [0.13260155, -0.5], [0.25978993539242673, -0.44731684579412084], [0.3535533905932738, -0.3535533905932738], [0.44731684579412084, -0.25978993539242673], [0.5, -0.13260155], [0.5, 0.0], [0.5, 0.13260155], [0.44731684579412084, 0.25978993539242673], [0.3535533905932738, 0.3535533905932738], [0.25978993539242673, 0.44731684579412084], [0.13260155, 0.5], [0.0, 0.5], [-0.13260155, 0.5], [-0.25978993539242673, 0.44731684579412084], [-0.3535533905932738, 0.3535533905932738], [-0.44731684579412084, 0.25978993539242673], [-0.5, 0.13260155], [-0.5, 0.0], [-0.5, -0.13260155], [-0.44731684579412084, -0.25978993539242673], [-0.3535533905932738, -0.3535533905932738], [-0.25978993539242673, -0.44731684579412084], [-0.13260155, -0.5], [0.0, -0.5]], ["M", "C", "C", "C", "C", "C", "C", "C", "C", "Z"]]], "pathtransforms": [[8.333333333333334, 0.0, 0.0, 8.333333333333334, 0.0, 0.0]], "alphas": [null], "edgecolors": ["#DD8452"], "facecolors": ["#DD8452"], "edgewidths": [1.0], "offsetcoordinates": "axes", "pathcoordinates": "display", "zorder": 1000001.0, "id": "el8140235237398608"}], "images": [], "sharex": [], "sharey": []}], "data": {"data01": [[18215.0, 76045.0], [18208.0, 75757.0], [18201.0, 73771.0], [18194.0, 73930.0], [18187.0, 71926.0], [18180.0, 72499.0], [18173.0, 71091.0], [18166.0, 70006.0], [18159.0, 70786.0], [18152.0, 70558.0], [18145.0, 63317.0], [18138.0, 68639.0], [18131.0, 66510.0], [18124.0, 65855.0], [18117.0, 60967.0], [18110.0, 65888.0], [18103.0, 64641.0], [18096.0, 63831.0], [18089.0, 64276.0], [18082.0, 58336.0], [18075.0, 62446.0], [18068.0, 61664.0], [18061.0, 61255.0], [18054.0, 63176.0], [18047.0, 56031.0], [18040.0, 58685.0], [18033.0, 58094.0], [18026.0, 58647.0], [18019.0, 59238.0], [18012.0, 54606.0], [18005.0, 55573.0], [17998.0, 55759.0], [17991.0, 55871.0], [17984.0, 53440.0], [17977.0, 52908.0], [17970.0, 53456.0], [17963.0, 53342.0], [17956.0, 52342.0], [17949.0, 48976.0], [17942.0, 49066.0], [17935.0, 47470.0], [17928.0, 46651.0], [17921.0, 44522.0], [17914.0, 44394.0], [17907.0, 44601.0], [17900.0, 39576.0], [17893.0, 37206.0], [17886.0, 45820.0], [17879.0, 45763.0], [17872.0, 46118.0], [17865.0, 43900.0], [17858.0, 37719.0], [17851.0, 42152.0], [17844.0, 41047.0], [17837.0, 39883.0], [17830.0, 39172.0], [17823.0, 38953.0], [17816.0, 38685.0], [17809.0, 39179.0], [17802.0, 37432.0], [17795.0, 36153.0], [17788.0, 36975.0], [17781.0, 33993.0], [17774.0, 35911.0], [17767.0, 35346.0], [17760.0, 34982.0], [17753.0, 35921.0], [17746.0, 34978.0], [17739.0, 35259.0], [17732.0, 34826.0], [17725.0, 35326.0], [17718.0, 32655.0], [17711.0, 34346.0], [17704.0, 33679.0], [17697.0, 34957.0], [17690.0, 34187.0], [17683.0, 31625.0], [17676.0, 33795.0], [17669.0, 33206.0], [17662.0, 33000.0], [17655.0, 33819.0], [17648.0, 33051.0], [17641.0, 32757.0], [17634.0, 32155.0], [17627.0, 31973.0], [17620.0, 31354.0], [17613.0, 30997.0], [17606.0, 31702.0], [17599.0, 31998.0], [17592.0, 32286.0], [17585.0, 30156.0], [17578.0, 30385.0], [17571.0, 30466.0], [17564.0, 30226.0], [17557.0, 29711.0], [17550.0, 29519.0], [17543.0, 29704.0], [17536.0, 27910.0], [17529.0, 28448.0], [17522.0, 32440.0], [17515.0, 32404.0], [17508.0, 33183.0], [17501.0, 33171.0], [17494.0, 27611.0], [17487.0, 32047.0], [17480.0, 31757.0], [17473.0, 31230.0], [17466.0, 30907.0], [17459.0, 30730.0], [17452.0, 30477.0], [17445.0, 30560.0], [17438.0, 30464.0], [17431.0, 30805.0], [17424.0, 30144.0], [17417.0, 28540.0], [17410.0, 29424.0], [17403.0, 29815.0], [17396.0, 30124.0], [17389.0, 29866.0], [17382.0, 29761.0], [17375.0, 28992.0], [17368.0, 29674.0], [17361.0, 29349.0], [17354.0, 26417.0], [17347.0, 28262.0], [17340.0, 27374.0], [17333.0, 28622.0], [17326.0, 28688.0], [17319.0, 25483.0], [17312.0, 27652.0], [17305.0, 27491.0], [17298.0, 27263.0], [17291.0, 27795.0], [17284.0, 26472.0], [17277.0, 26320.0], [17270.0, 26000.0], [17263.0, 27068.0], [17256.0, 25663.0], [17249.0, 25651.0], [17242.0, 25504.0], [17235.0, 26361.0], [17228.0, 26169.0], [17221.0, 24358.0], [17214.0, 24843.0], [17207.0, 23832.0], [17200.0, 23741.0], [17193.0, 23662.0], [17186.0, 22954.0], [17179.0, 22732.0], [17172.0, 21348.0], [17165.0, 21228.0], [17158.0, 24032.0], [17151.0, 24394.0], [17144.0, 23898.0], [17137.0, 23660.0], [17130.0, 19906.0], [17123.0, 22611.0], [17116.0, 21838.0], [17109.0, 22291.0], [17102.0, 21781.0], [17095.0, 21390.0], [17088.0, 21140.0], [17081.0, 21993.0], [17074.0, 21332.0], [17067.0, 20638.0], [17060.0, 21074.0], [17053.0, 19903.0], [17046.0, 20785.0], [17039.0, 20456.0], [17032.0, 20140.0], [17025.0, 20344.0], [17018.0, 20741.0], [17011.0, 19437.0], [17004.0, 20104.0], [16997.0, 19317.0], [16990.0, 18159.0], [16983.0, 19454.0], [16976.0, 18604.0], [16969.0, 19046.0], [16962.0, 18829.0], [16955.0, 17515.0], [16948.0, 18244.0], [16941.0, 18424.0], [16934.0, 18218.0], [16927.0, 18593.0], [16920.0, 18001.0], [16913.0, 17075.0], [16906.0, 17617.0], [16899.0, 17541.0], [16892.0, 16841.0], [16885.0, 16581.0], [16878.0, 16695.0], [16871.0, 16599.0], [16864.0, 17251.0], [16857.0, 16367.0], [16850.0, 15894.0], [16843.0, 15580.0], [16836.0, 15716.0], [16829.0, 14903.0], [16822.0, 14847.0], [16815.0, 15530.0], [16808.0, 15260.0], [16801.0, 14252.0], [16794.0, 13234.0], [16787.0, 15930.0], [16780.0, 15630.0], [16773.0, 15672.0], [16766.0, 12704.0], [16759.0, 15210.0]], "data02": [[18579.0, 110756.0], [18572.0, 110102.0], [18565.0, 107824.0], [18558.0, 108079.0], [18551.0, 106209.0], [18544.0, 106718.0], [18537.0, 105797.0], [18530.0, 104580.0], [18523.0, 104841.0], [18516.0, 95526.0], [18509.0, 104107.0], [18502.0, 102553.0], [18495.0, 100029.0], [18488.0, 98158.0], [18481.0, 98017.0], [18474.0, 98935.0], [18467.0, 99267.0], [18460.0, 100485.0], [18453.0, 91181.0], [18446.0, 95959.0], [18439.0, 96249.0], [18432.0, 96472.0], [18425.0, 95672.0], [18418.0, 97952.0], [18411.0, 88054.0], [18404.0, 93263.0], [18397.0, 93641.0], [18390.0, 93303.0], [18383.0, 92105.0], [18376.0, 90841.0], [18369.0, 90152.0], [18362.0, 89775.0], [18355.0, 89065.0], [18348.0, 88026.0], [18341.0, 87411.0], [18334.0, 87704.0], [18327.0, 88258.0], [18320.0, 87457.0], [18313.0, 81420.0], [18306.0, 82536.0], [18299.0, 79884.0], [18292.0, 79398.0], [18285.0, 76844.0], [18278.0, 77587.0], [18271.0, 77355.0], [18264.0, 70685.0], [18257.0, 68894.0], [18250.0, 81415.0], [18243.0, 82267.0], [18236.0, 80747.0], [18229.0, 67168.0], [18222.0, 81992.0]], "data03": [[0.03121266427718042, 0.9529446248196247, 0.9013385341510343]], "data04": [[0.01149940262843488, 0.8703327922077921], [0.19686379928315415, 0.8703327922077921], [0.20014934289127842, 0.8703327922077921], [0.20014934289127842, 0.8769465488215487], [0.20014934289127842, 0.9768518518518519], [0.20014934289127842, 0.9834656084656084], [0.19686379928315415, 0.9834656084656084], [0.01149940262843488, 0.9834656084656084], [0.008213859020310632, 0.9834656084656084], [0.008213859020310632, 0.9768518518518519], [0.008213859020310632, 0.8769465488215487], [0.008213859020310632, 0.8703327922077921], [0.01149940262843488, 0.8703327922077921]]}, "id": "el8140235297581776", "plugins": [{"type": "reset"}, {"type": "zoom", "button": true, "enabled": false}, {"type": "boxzoom", "button": true, "enabled": false}]});
            })
         });
}
</script>`})
            });
    }

    render() {
        return (
            <div id='chartFormContainer'>
                <form onSubmit={this.handleSubmit} id='chartForm'>
                    <Selector name='drugName' label='Drug Name' value={this.state.drugName}
                        handleChange={this.handleChange} options=
                        {[['vascepa', 'Vascepa'], ['drug1', 'Drug1']]} />

                    <Selector name='chartType' label='Chart Type' value={this.state.chartType}
                        handleChange={this.handleChange} options={[
                            ['graph_normalizedTRx', 'Normalized Total Prescriptions'],
                            ['graph_normalizedNRx', 'Normalized New Prescriptions'],
                            ['graph_normalizedRRx', 'Normalized Refill Prescriptions']]} />

                    <Selector name='numWeeks' label='Number of Weeks' value={this.state.numWeeks}
                        handleChange={this.handleChange} options={[
                            ['52', ' 52 weeks'],
                            ['104', '104 weeks'],
                            ['156', '156 weeks']]} />

                    <Selector name='predictBool' label='Show Prediction' value={this.state.predictBool}
                        handleChange={this.handleChange} options={[
                            ['true', 'Yes'],
                            ['false', 'No']]} />

                    <Selector name='weeksToTrain' label='Weeks to Train Prediction'
                        value={this.state.weeksToTrain} handleChange={this.handleChange} options={[
                            ['156', '156 weeks'],
                            ['208', '208 weeks']]} />

                    <Selector name='dataSource' label='Data Source' value={this.state.dataSource}
                        handleChange={this.handleChange} options={[
                            ['updated', 'Updated'],
                            ['raw', 'Raw']]} />

                    <input type="submit" value="Predict" />

                </form>
                {this.state.showImage == "true"
                    ? <div> {ReactHtmlParser(this.state.imageData)} </div>
                    : null
                }
            </div >
        )
    }
}

export default InteractiveForm;